server {  
    listen       80;  
    server_name  localhost;  
  
    # 设置网站根目录为 /usr/share/nginx/html/main（或你选择的任何目录）  
    # 但由于我们稍后会通过符号链接或修改 root 指令来指向正确的目录，  
    # 这里先设置为默认的 Nginx 根目录，然后在 Dockerfile 中进行调整。  
    # 然而，为了清晰起见，并避免在 Dockerfile 中做太多文件系统操作，  
    # 我们将直接在这里设置正确的 root 目录。  
    root   /vmq/main/public;  
    index  index.php index.html index.htm;  
  
    # 处理静态文件请求  
    location / {  
        try_files $uri $uri/ /index.php?$query_string;  
    }  
  
    # 处理 PHP 脚本请求  
    location ~ \.php$ {  
        # 包含 PHP 处理的快速配置  
        include snippets/fastcgi-php.conf;  
  
        # 将请求传递给 PHP-FPM 监听器  
        # 在 php-nginx:7.4-alpine 镜像中，这通常是 Unix 套接字  
        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;  
  
        # 其他 PHP 处理设置（可选）  
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  
        include fastcgi_params;  
    }  
  
    # 禁止访问 .htaccess 和 .htpasswd 文件  
    location ~ /\.ht {  
        deny all;  
    }  
  
    # 如果你的应用需要处理其他类型的请求（如 API 路由），  
    # 你可以在这里添加更多的 location 块来配置它们。  
}